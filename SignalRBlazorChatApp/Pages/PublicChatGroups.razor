@page "/PublicChatGroups"
@using SignalRBlazorChatApp.Components

<h3 style="text-align:center">Public Chat Groups</h3>

@if (_listPublicChatGroupsDto == null)
{
	<LoadingIndicator />
}
else
{	
	<MudTable Items="@_listPublicChatGroupsDto" Class="table-styles" Hover="true" Breakpoint="Breakpoint.Sm" Striped="true" Dense="true">
		<HeaderContent>
			<MudTh style="display:none;">Group Id</MudTh>
			<MudTh>Group Name</MudTh>
			<MudTh>Created Date</MudTh>
			<MudTh style="display:none;">Group Owner Id</MudTh>
			<MudTh>Group Owner</MudTh>
			<MudTh></MudTh>
		</HeaderContent>
		<RowTemplate>
			<MudTd DataLabel="Group Id" style="display:none;">@context.ChatGroupId</MudTd>
			<MudTd DataLabel="Group Name">
				<MudButton Variant="Variant.Text" @onclick="(()=>RedirectToGroupMessages(context.ChatGroupId))">@context.ChatGroupName</MudButton>
			</MudTd>
			<MudTd DataLabel="Created Date">@context.GroupCreated</MudTd>
			<MudTd DataLabel="Group Owner Id" style="display:none;">@context.GroupOwnerUserId</MudTd>
			<MudTd DataLabel="Group Owner">@context.UserName</MudTd>
			<MudTd>
				@if (UserIdMatch(userId, context.GroupOwnerUserId))
				{
					<MudIcon Icon="@Icons.TwoTone.Edit" Title="Edit" class="mud-table-button" Color="Color.Info" />
					<MudIcon Icon="@Icons.TwoTone.Delete" Title="Delete" class="mud-table-button" Color="Color.Error" />
				}
			</MudTd>
		</RowTemplate>
		<PagerContent>
			<MudTablePager />
		</PagerContent>
	</MudTable>
}
